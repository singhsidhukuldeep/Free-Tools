import{c as V,r as b,W as y,j as s,H as ye}from"./index-CQMLJ7Q6.js";import{U as fe}from"./upload-R_8DWVxE.js";import{R as ve}from"./refresh-cw-CMiEo1jJ.js";import{M as be}from"./maximize-CdiLBwsu.js";import{I as Ce}from"./image-BI8ZC48C.js";import{D as De}from"./download-4l5LXgPK.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=V("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=V("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=V("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var Re=Object.defineProperty,Se=(l,t,e)=>t in l?Re(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e,v=(l,t,e)=>Se(l,typeof t!="symbol"?t+"":t,e);const q={x:0,y:0,width:0,height:0,unit:"px"},N=(l,t,e)=>Math.min(Math.max(l,t),e),Me=(...l)=>l.filter(t=>t&&typeof t=="string").join(" "),re=(l,t)=>l===t||l.width===t.width&&l.height===t.height&&l.x===t.x&&l.y===t.y&&l.unit===t.unit;function Ie(l,t,e,n){const r=z(l,e,n);return l.width&&(r.height=r.width/t),l.height&&(r.width=r.height*t),r.y+r.height>n&&(r.height=n-r.y,r.width=r.height*t),r.x+r.width>e&&(r.width=e-r.x,r.height=r.width/t),l.unit==="%"?P(r,e,n):r}function Ee(l,t,e){const n=z(l,t,e);return n.x=(t-n.width)/2,n.y=(e-n.height)/2,l.unit==="%"?P(n,t,e):n}function P(l,t,e){return l.unit==="%"?{...q,...l,unit:"%"}:{unit:"%",x:l.x?l.x/t*100:0,y:l.y?l.y/e*100:0,width:l.width?l.width/t*100:0,height:l.height?l.height/e*100:0}}function z(l,t,e){return l.unit?l.unit==="px"?{...q,...l,unit:"px"}:{unit:"px",x:l.x?l.x*t/100:0,y:l.y?l.y*e/100:0,width:l.width?l.width*t/100:0,height:l.height?l.height*e/100:0}:{...q,...l,unit:"px"}}function ie(l,t,e,n,r,i=0,h=0,m=n,d=r){const o={...l};let g=Math.min(i,n),u=Math.min(h,r),w=Math.min(m,n),p=Math.min(d,r);t&&(t>1?(g=h?h*t:g,u=g/t,w=m*t):(u=i?i/t:u,g=u*t,p=d/t)),o.y<0&&(o.height=Math.max(o.height+o.y,u),o.y=0),o.x<0&&(o.width=Math.max(o.width+o.x,g),o.x=0);const f=n-(o.x+o.width);f<0&&(o.x=Math.min(o.x,n-g),o.width+=f);const k=r-(o.y+o.height);if(k<0&&(o.y=Math.min(o.y,r-u),o.height+=k),o.width<g&&((e==="sw"||e=="nw")&&(o.x-=g-o.width),o.width=g),o.height<u&&((e==="nw"||e=="ne")&&(o.y-=u-o.height),o.height=u),o.width>w&&((e==="sw"||e=="nw")&&(o.x-=w-o.width),o.width=w),o.height>p&&((e==="nw"||e=="ne")&&(o.y-=p-o.height),o.height=p),t){const C=o.width/o.height;if(C<t){const S=Math.max(o.width/t,u);(e==="nw"||e=="ne")&&(o.y-=S-o.height),o.height=S}else if(C>t){const S=Math.max(o.height*t,g);(e==="sw"||e=="nw")&&(o.x-=S-o.width),o.width=S}}return o}function ze(l,t,e,n){const r={...l};return t==="ArrowLeft"?n==="nw"?(r.x-=e,r.y-=e,r.width+=e,r.height+=e):n==="w"?(r.x-=e,r.width+=e):n==="sw"?(r.x-=e,r.width+=e,r.height+=e):n==="ne"?(r.y+=e,r.width-=e,r.height-=e):n==="e"?r.width-=e:n==="se"&&(r.width-=e,r.height-=e):t==="ArrowRight"&&(n==="nw"?(r.x+=e,r.y+=e,r.width-=e,r.height-=e):n==="w"?(r.x+=e,r.width-=e):n==="sw"?(r.x+=e,r.width-=e,r.height-=e):n==="ne"?(r.y-=e,r.width+=e,r.height+=e):n==="e"?r.width+=e:n==="se"&&(r.width+=e,r.height+=e)),t==="ArrowUp"?n==="nw"?(r.x-=e,r.y-=e,r.width+=e,r.height+=e):n==="n"?(r.y-=e,r.height+=e):n==="ne"?(r.y-=e,r.width+=e,r.height+=e):n==="sw"?(r.x+=e,r.width-=e,r.height-=e):n==="s"?r.height-=e:n==="se"&&(r.width-=e,r.height-=e):t==="ArrowDown"&&(n==="nw"?(r.x+=e,r.y+=e,r.width-=e,r.height-=e):n==="n"?(r.y+=e,r.height-=e):n==="ne"?(r.y+=e,r.width-=e,r.height-=e):n==="sw"?(r.x-=e,r.width+=e,r.height+=e):n==="s"?r.height+=e:n==="se"&&(r.width+=e,r.height+=e)),r}const $={capture:!0,passive:!1};let He=0;const H=class I extends b.PureComponent{constructor(){super(...arguments),v(this,"docMoveBound",!1),v(this,"mouseDownOnCrop",!1),v(this,"dragStarted",!1),v(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),v(this,"componentRef",b.createRef()),v(this,"mediaRef",b.createRef()),v(this,"resizeObserver"),v(this,"initChangeCalled",!1),v(this,"instanceId",`rc-${He++}`),v(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),v(this,"onCropPointerDown",t=>{const{crop:e,disabled:n}=this.props,r=this.getBox();if(!e)return;const i=z(e,r.width,r.height);if(n)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const h=t.target.dataset.ord,m=!!h;let d=t.clientX,o=t.clientY,g=i.x,u=i.y;if(h){const w=t.clientX-r.x,p=t.clientY-r.y;let f=0,k=0;h==="ne"||h=="e"?(f=w-(i.x+i.width),k=p-i.y,g=i.x,u=i.y+i.height):h==="se"||h==="s"?(f=w-(i.x+i.width),k=p-(i.y+i.height),g=i.x,u=i.y):h==="sw"||h=="w"?(f=w-i.x,k=p-(i.y+i.height),g=i.x+i.width,u=i.y):(h==="nw"||h=="n")&&(f=w-i.x,k=p-i.y,g=i.x+i.width,u=i.y+i.height),d=g+r.x+f,o=u+r.y+k}this.evData={startClientX:d,startClientY:o,startCropX:g,startCropY:u,clientX:t.clientX,clientY:t.clientY,isResize:m,ord:h},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),v(this,"onComponentPointerDown",t=>{const{crop:e,disabled:n,locked:r,keepSelection:i,onChange:h}=this.props,m=this.getBox();if(n||r||i&&e)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const d=t.clientX-m.x,o=t.clientY-m.y,g={unit:"px",x:d,y:o,width:0,height:0};this.evData={startClientX:t.clientX,startClientY:t.clientY,startCropX:d,startCropY:o,clientX:t.clientX,clientY:t.clientY,isResize:!0},this.mouseDownOnCrop=!0,h(z(g,m.width,m.height),P(g,m.width,m.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),v(this,"onDocPointerMove",t=>{const{crop:e,disabled:n,onChange:r,onDragStart:i}=this.props,h=this.getBox();if(n||!e||!this.mouseDownOnCrop)return;t.cancelable&&t.preventDefault(),this.dragStarted||(this.dragStarted=!0,i&&i(t));const{evData:m}=this;m.clientX=t.clientX,m.clientY=t.clientY;let d;m.isResize?d=this.resizeCrop():d=this.dragCrop(),re(e,d)||r(z(d,h.width,h.height),P(d,h.width,h.height))}),v(this,"onComponentKeyDown",t=>{const{crop:e,disabled:n,onChange:r,onComplete:i}=this.props;if(n)return;const h=t.key;let m=!1;if(!e)return;const d=this.getBox(),o=this.makePixelCrop(d),g=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?I.nudgeStepLarge:t.shiftKey?I.nudgeStepMedium:I.nudgeStep;if(h==="ArrowLeft"?(o.x-=g,m=!0):h==="ArrowRight"?(o.x+=g,m=!0):h==="ArrowUp"?(o.y-=g,m=!0):h==="ArrowDown"&&(o.y+=g,m=!0),m){t.cancelable&&t.preventDefault(),o.x=N(o.x,0,d.width-o.width),o.y=N(o.y,0,d.height-o.height);const u=z(o,d.width,d.height),w=P(o,d.width,d.height);r(u,w),i&&i(u,w)}}),v(this,"onHandlerKeyDown",(t,e)=>{const{aspect:n=0,crop:r,disabled:i,minWidth:h=0,minHeight:m=0,maxWidth:d,maxHeight:o,onChange:g,onComplete:u}=this.props,w=this.getBox();if(i||!r)return;if(t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="ArrowLeft"||t.key==="ArrowRight")t.stopPropagation(),t.preventDefault();else return;const p=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?I.nudgeStepLarge:t.shiftKey?I.nudgeStepMedium:I.nudgeStep,f=z(r,w.width,w.height),k=ze(f,t.key,p,e),C=ie(k,n,e,w.width,w.height,h,m,d,o);if(!re(r,C)){const S=P(C,w.width,w.height);g(C,S),u&&u(C,S)}}),v(this,"onDocPointerDone",t=>{const{crop:e,disabled:n,onComplete:r,onDragEnd:i}=this.props,h=this.getBox();this.unbindDocMove(),!(n||!e)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,i&&i(t),r&&r(z(e,h.width,h.height),P(e,h.width,h.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),v(this,"onDragFocus",()=>{var t;(t=this.componentRef.current)==null||t.scrollTo(0,0)})}get document(){return document}getBox(){const t=this.mediaRef.current;if(!t)return{x:0,y:0,width:0,height:0};const{x:e,y:n,width:r,height:i}=t.getBoundingClientRect();return{x:e,y:n,width:r,height:i}}componentDidUpdate(t){const{crop:e,onComplete:n}=this.props;if(n&&!t.crop&&e){const{width:r,height:i}=this.getBox();r&&i&&n(z(e,r,i),P(e,r,i))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,$),this.document.addEventListener("pointerup",this.onDocPointerDone,$),this.document.addEventListener("pointercancel",this.onDocPointerDone,$),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,$),this.document.removeEventListener("pointerup",this.onDocPointerDone,$),this.document.removeEventListener("pointercancel",this.onDocPointerDone,$),this.docMoveBound=!1)}getCropStyle(){const{crop:t}=this.props;if(t)return{top:`${t.y}${t.unit}`,left:`${t.x}${t.unit}`,width:`${t.width}${t.unit}`,height:`${t.height}${t.unit}`}}dragCrop(){const{evData:t}=this,e=this.getBox(),n=this.makePixelCrop(e),r=t.clientX-t.startClientX,i=t.clientY-t.startClientY;return n.x=N(t.startCropX+r,0,e.width-n.width),n.y=N(t.startCropY+i,0,e.height-n.height),n}getPointRegion(t,e,n,r){const{evData:i}=this,h=i.clientX-t.x,m=i.clientY-t.y;let d;r&&e?d=e==="nw"||e==="n"||e==="ne":d=m<i.startCropY;let o;return n&&e?o=e==="nw"||e==="w"||e==="sw":o=h<i.startCropX,o?d?"nw":"sw":d?"ne":"se"}resolveMinDimensions(t,e,n=0,r=0){const i=Math.min(n,t.width),h=Math.min(r,t.height);return!e||!i&&!h?[i,h]:e>1?i?[i,i/e]:[h*e,h]:h?[h*e,h]:[i,i/e]}resizeCrop(){const{evData:t}=this,{aspect:e=0,maxWidth:n,maxHeight:r}=this.props,i=this.getBox(),[h,m]=this.resolveMinDimensions(i,e,this.props.minWidth,this.props.minHeight);let d=this.makePixelCrop(i);const o=this.getPointRegion(i,t.ord,h,m),g=t.ord||o;let u=t.clientX-t.startClientX,w=t.clientY-t.startClientY;(h&&g==="nw"||g==="w"||g==="sw")&&(u=Math.min(u,-h)),(m&&g==="nw"||g==="n"||g==="ne")&&(w=Math.min(w,-m));const p={unit:"px",x:0,y:0,width:0,height:0};o==="ne"?(p.x=t.startCropX,p.width=u,e?(p.height=p.width/e,p.y=t.startCropY-p.height):(p.height=Math.abs(w),p.y=t.startCropY-p.height)):o==="se"?(p.x=t.startCropX,p.y=t.startCropY,p.width=u,e?p.height=p.width/e:p.height=w):o==="sw"?(p.x=t.startCropX+u,p.y=t.startCropY,p.width=Math.abs(u),e?p.height=p.width/e:p.height=w):o==="nw"&&(p.x=t.startCropX+u,p.width=Math.abs(u),e?(p.height=p.width/e,p.y=t.startCropY-p.height):(p.height=Math.abs(w),p.y=t.startCropY+w));const f=ie(p,e,o,i.width,i.height,h,m,n,r);return e||I.xyOrds.indexOf(g)>-1?d=f:I.xOrds.indexOf(g)>-1?(d.x=f.x,d.width=f.width):I.yOrds.indexOf(g)>-1&&(d.y=f.y,d.height=f.height),d.x=N(d.x,0,i.width-d.width),d.y=N(d.y,0,i.height-d.height),d}renderCropSelection(){const{ariaLabels:t=I.defaultProps.ariaLabels,disabled:e,locked:n,renderSelectionAddon:r,ruleOfThirds:i,crop:h}=this.props,m=this.getCropStyle();if(h)return y.createElement("div",{style:m,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":t.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!e&&!n&&y.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},y.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),y.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),y.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),y.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":t.nwDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"nw"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":t.nDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"n"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":t.neDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"ne"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":t.eDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"e"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":t.seDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"se"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":t.sDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"s"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":t.swDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"sw"),role:"button"}),y.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":t.wDragHandle,onKeyDown:d=>this.onHandlerKeyDown(d,"w"),role:"button"})),r&&y.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:d=>d.stopPropagation()},r(this.state)),i&&y.createElement(y.Fragment,null,y.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),y.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(t){const e={...q,...this.props.crop||{}};return z(e,t.width,t.height)}render(){const{aspect:t,children:e,circularCrop:n,className:r,crop:i,disabled:h,locked:m,style:d,ruleOfThirds:o}=this.props,{cropIsActive:g,newCropIsBeingDrawn:u}=this.state,w=i?this.renderCropSelection():null,p=Me("ReactCrop",r,g&&"ReactCrop--active",h&&"ReactCrop--disabled",m&&"ReactCrop--locked",u&&"ReactCrop--new-crop",i&&t&&"ReactCrop--fixed-aspect",i&&n&&"ReactCrop--circular-crop",i&&o&&"ReactCrop--rule-of-thirds",!this.dragStarted&&i&&!i.width&&!i.height&&"ReactCrop--invisible-crop",n&&"ReactCrop--no-animate");return y.createElement("div",{ref:this.componentRef,className:p,style:d},y.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},e),i?y.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},y.createElement("defs",null,y.createElement("mask",{id:`hole-${this.instanceId}`},y.createElement("rect",{width:"100%",height:"100%",fill:"white"}),n?y.createElement("ellipse",{cx:`${i.x+i.width/2}${i.unit}`,cy:`${i.y+i.height/2}${i.unit}`,rx:`${i.width/2}${i.unit}`,ry:`${i.height/2}${i.unit}`,fill:"black"}):y.createElement("rect",{x:`${i.x}${i.unit}`,y:`${i.y}${i.unit}`,width:`${i.width}${i.unit}`,height:`${i.height}${i.unit}`,fill:"black"}))),y.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,w)}};v(H,"xOrds",["e","w"]),v(H,"yOrds",["n","s"]),v(H,"xyOrds",["nw","ne","se","sw"]),v(H,"nudgeStep",1),v(H,"nudgeStepMedium",10),v(H,"nudgeStepLarge",100),v(H,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let Pe=H;function ne(l,t,e){return Ee(Ie({unit:"%",width:90},e||16/9,l,t),l,t)}const Le=()=>{const[l,t]=b.useState(""),[e,n]=b.useState(),[r,i]=b.useState(),[h,m]=b.useState(16/9),[d,o]=b.useState(null),[g,u]=b.useState({width:0,height:0,x:0,y:0}),[w,p]=b.useState(!1),[f,k]=b.useState(!1),[C,S]=b.useState({w:16,h:9}),[G,Z]=b.useState(1),[B,A]=b.useState({x:0,y:0}),[E,J]=b.useState("crop"),[O,_]=b.useState(!1),[K,Q]=b.useState({x:0,y:0}),M=b.useRef(null),L=b.useRef(null),oe=b.useRef(null),se=a=>{E==="move"&&(a.preventDefault(),_(!0),Q({x:a.clientX-B.x,y:a.clientY-B.y}))},ae=a=>{!O||E!=="move"||(a.preventDefault(),A({x:a.clientX-K.x,y:a.clientY-K.y}))},ee=()=>{_(!1)};b.useEffect(()=>{Z(1),A({x:0,y:0}),J("crop")},[l]),b.useEffect(()=>{const a=x=>{x.key==="Shift"&&p(!0)},c=x=>{x.key==="Shift"&&p(!1)};return window.addEventListener("keydown",a),window.addEventListener("keyup",c),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",c)}},[]);const de=a=>{if(a.target.files&&a.target.files.length>0){n(void 0);const c=new FileReader;c.addEventListener("load",()=>t(c.result.toString()||"")),c.readAsDataURL(a.target.files[0])}},he=a=>{const{width:c,height:x,naturalWidth:D,naturalHeight:j}=a.currentTarget,R=D/j;o(R),m(R),k(!1);const X=ne(c,x,R);n(X),i(X)},Y=(a,c=!1)=>{if(m(a),k(c),M.current){const{width:x,height:D}=M.current,j=ne(x,D,a);n(j),i({unit:"px",x:j.x/100*x,y:j.y/100*D,width:j.width/100*x,height:j.height/100*D})}};b.useEffect(()=>{if(!r||!L.current||!M.current)return;const a=M.current,c=L.current,x=r,D=a.naturalWidth/a.width,j=a.naturalHeight/a.height,R=c.getContext("2d"),X=window.devicePixelRatio,T=Math.floor(x.width*D),F=Math.floor(x.height*j),pe=Math.floor(x.x*D),ge=Math.floor(x.y*j);u({width:T,height:F,x:pe,y:ge}),c.width=T*X,c.height=F*X,R.scale(X,X),R.imageSmoothingQuality="high";const me=x.x*D,ue=x.y*j,xe=x.width*D,we=x.height*j;R.clearRect(0,0,T,F),R.drawImage(a,me,ue,xe,we,0,0,T,F)},[r]);const le=()=>{if(!L.current)return;const c=L.current.toDataURL("image/png"),x=document.createElement("a");x.download=`cropped-image-${g.width}x${g.height}.png`,x.href=c,x.click()},U={background:"var(--card)",borderRadius:"1rem",border:"1px solid var(--border)",padding:"2rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.05)"},W=a=>({padding:"0.6rem 1.2rem",borderRadius:"0.5rem",border:a?"2px solid var(--primary)":"1px solid var(--border)",background:a?"var(--primary-light)":"white",color:a?"var(--primary)":"var(--foreground)",fontWeight:a?"600":"500",cursor:"pointer",transition:"all 0.2s",fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"}),ce=h||(w&&(e!=null&&e.width)&&(e!=null&&e.height)?e.width/e.height:void 0);return s.jsxs(s.Fragment,{children:[s.jsxs(ye,{children:[s.jsx("title",{children:"Image Cropper - Free Online Image Cropping Tool"}),s.jsx("meta",{name:"description",content:"Free online image cropper. Crop JPG, PNG, and WebP images to exact pixel dimensions. Live preview and custom aspect ratios."})]}),s.jsx("div",{className:"container",style:{padding:"3rem 1.5rem"},children:s.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[s.jsxs("header",{style:{marginBottom:"2rem",textAlign:"center"},children:[s.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"800",marginBottom:"0.5rem"},children:"Image Cropper"}),s.jsx("p",{style:{color:"#64748b"},children:"Crop your images to any size or aspect ratio."})]}),l?s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 340px",gap:"2rem",alignItems:"start"},className:"cropper-layout",children:[s.jsxs("div",{style:U,children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",borderBottom:"1px solid var(--border)",paddingBottom:"1rem"},children:[s.jsxs("h3",{style:{fontWeight:"700",display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(te,{size:20})," Crop Editor"]}),s.jsxs("button",{onClick:()=>t(""),style:{padding:"0.5rem 1rem",borderRadius:"0.5rem",border:"1px solid #ef4444",background:"#fff",color:"#ef4444",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",fontSize:"0.9rem"},children:[s.jsx(ve,{size:16})," Load New Image"]})]}),s.jsxs("div",{style:{background:"#0f172a",borderRadius:"0.75rem",padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem",minHeight:"400px"},children:[s.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",background:"rgba(255,255,255,0.05)",padding:"0.75rem",borderRadius:"0.75rem",flexWrap:"wrap",border:"1px solid rgba(255,255,255,0.1)"},children:[s.jsxs("div",{style:{display:"flex",background:"#1e293b",borderRadius:"0.4rem",padding:"3px"},children:[s.jsxs("button",{onClick:()=>J("crop"),style:{padding:"0.5rem 1rem",borderRadius:"0.3rem",background:E==="crop"?"var(--primary)":"transparent",color:"white",border:"none",cursor:"pointer",display:"flex",gap:"0.4rem",alignItems:"center",fontSize:"0.85rem",fontWeight:"600"},title:"Crop Mode",children:[s.jsx(be,{size:15})," Crop"]}),s.jsxs("button",{onClick:()=>J("move"),style:{padding:"0.5rem 1rem",borderRadius:"0.3rem",background:E==="move"?"var(--primary)":"transparent",color:"white",border:"none",cursor:"pointer",display:"flex",gap:"0.4rem",alignItems:"center",fontSize:"0.85rem",fontWeight:"600"},title:"Move/Zoom Image",children:[s.jsx(ke,{size:15})," Move"]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:"1 1 200px",color:"white",fontSize:"0.9rem",background:"#1e293b",padding:"0.5rem 1rem",borderRadius:"0.5rem"},children:[s.jsx(te,{size:18,style:{opacity:.7}}),s.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:G,onChange:a=>Z(Number(a.target.value)),style:{flex:1,accentColor:"var(--primary)",cursor:"pointer",height:"4px"}}),s.jsxs("span",{style:{minWidth:"3.5ch",fontVariantNumeric:"tabular-nums",opacity:.8},children:[Math.round(G*100),"%"]})]}),s.jsx("button",{onClick:()=>{Z(1),A({x:0,y:0})},style:{background:"rgba(255,255,255,0.1)",border:"none",color:"white",padding:"0.5rem 0.8rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.85rem",whiteSpace:"nowrap",transition:"background 0.2s"},onMouseOver:a=>a.target.style.background="rgba(255,255,255,0.2)",onMouseOut:a=>a.target.style.background="rgba(255,255,255,0.1)",children:"Reset"})]}),s.jsx("div",{ref:oe,style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",position:"relative",cursor:E==="move"?O?"grabbing":"grab":"crosshair",background:`url('data:image/svg+xml;utf8,<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g fill="%231e293b" fill-opacity="0.4"><rect x="0" y="0" width="10" height="10"/><rect x="10" y="10" width="10" height="10"/></g></svg>')`,borderRadius:"0.5rem",boxShadow:"inset 0 0 20px rgba(0,0,0,0.5)",width:"100%"},onMouseDown:se,onMouseMove:ae,onMouseUp:ee,onMouseLeave:ee,onTouchStart:a=>{if(E!=="move")return;const c=a.touches[0];_(!0),Q({x:c.clientX-B.x,y:c.clientY-B.y})},onTouchMove:a=>{if(!O||E!=="move")return;const c=a.touches[0];A({x:c.clientX-K.x,y:c.clientY-K.y})},onTouchEnd:()=>_(!1),children:s.jsx("div",{style:{transform:`translate(${B.x}px, ${B.y}px) scale(${G})`,transformOrigin:"center center",transition:O?"none":"transform 0.1s ease-out"},children:s.jsx(Pe,{crop:e,onChange:(a,c)=>n(c),onComplete:a=>i(a),aspect:ce,style:{maxWidth:"none",maxHeight:"none"},disabled:E==="move",locked:E==="move",children:s.jsx("img",{ref:M,alt:"Crop me",src:l,onLoad:he,style:{display:"block",maxWidth:"100%",maxHeight:"60vh",objectFit:"contain",pointerEvents:E==="move"?"none":"auto"}})})})})]})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[s.jsxs("div",{style:U,children:[s.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"1rem"},children:"Aspect Ratio"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1rem"},children:[s.jsxs("button",{onClick:()=>Y(d,!1),style:W(h===d&&!f),children:[s.jsx(Ce,{size:16})," Original"]}),s.jsx("button",{onClick:()=>{m(void 0),k(!1)},style:W(h===void 0&&!f),children:"Free"}),s.jsx("button",{onClick:()=>Y(16/9,!1),style:W(h===16/9&&!f),children:"16:9"}),s.jsx("button",{onClick:()=>Y(4/3,!1),style:W(h===4/3&&!f),children:"4:3"}),s.jsx("button",{onClick:()=>Y(1,!1),style:W(h===1&&!f),children:"1:1"}),s.jsx("button",{onClick:()=>{k(!0),Y(C.w/C.h,!0)},style:W(f),children:"Custom"})]}),f&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f8fafc",padding:"0.75rem",borderRadius:"0.5rem",border:"1px solid var(--border)"},children:[s.jsx("input",{type:"number",value:C.w,onChange:a=>{const c=Number(a.target.value);S(x=>({...x,w:c})),c>0&&C.h>0&&Y(c/C.h,!0)},style:{width:"100%",padding:"0.4rem",borderRadius:"0.25rem",border:"1px solid #cbd5e1"},placeholder:"W"}),s.jsx("span",{style:{fontWeight:"600",color:"#64748b"},children:":"}),s.jsx("input",{type:"number",value:C.h,onChange:a=>{const c=Number(a.target.value);S(x=>({...x,h:c})),c>0&&C.w>0&&Y(C.w/c,!0)},style:{width:"100%",padding:"0.4rem",borderRadius:"0.25rem",border:"1px solid #cbd5e1"},placeholder:"H"})]})]}),s.jsxs("div",{style:U,children:[s.jsx("div",{style:{marginBottom:"1.5rem",display:"flex",justifyContent:"space-between",alignItems:"end"},children:s.jsxs("div",{children:[s.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"700",marginBottom:"0.5rem"},children:"Live Preview"}),s.jsxs("p",{style:{fontSize:"0.9rem",color:"#64748b"},children:["Actual result (",g.width," × ",g.height,"px)"]})]})}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[s.jsx("label",{style:{fontSize:"0.8rem",fontWeight:"600",color:"#64748b"},children:"Pos X (px)"}),s.jsx("button",{onClick:()=>{if(e&&M.current){const a=M.current,c=(100-e.width)/2,x={...e,x:c};n(x),i({unit:"px",x:c/100*a.width,y:e.y/100*a.height,width:e.width/100*a.width,height:e.height/100*a.height})}},style:{border:"none",background:"transparent",color:"var(--primary)",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",padding:0},title:"Center Horizontally",children:"Center X"})]}),s.jsx("input",{type:"number",value:g.x||0,onChange:a=>{const c=M.current;if(c&&e){const D=Math.max(0,Number(a.target.value))*c.width/c.naturalWidth,j=D/c.width*100,R={...e,x:j};n(R),i({unit:"px",x:D,y:e.y/100*c.height,width:e.width/100*c.width,height:e.height/100*c.height})}},style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid var(--border)",fontSize:"0.9rem"}})]}),s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[s.jsx("label",{style:{fontSize:"0.8rem",fontWeight:"600",color:"#64748b"},children:"Pos Y (px)"}),s.jsx("button",{onClick:()=>{if(e&&M.current){const a=M.current,c=(100-e.height)/2,x={...e,y:c};n(x),i({unit:"px",x:e.x/100*a.width,y:c/100*a.height,width:e.width/100*a.width,height:e.height/100*a.height})}},style:{border:"none",background:"transparent",color:"var(--primary)",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",padding:0},title:"Center Vertically",children:"Center Y"})]}),s.jsx("input",{type:"number",value:g.y||0,onChange:a=>{const c=M.current;if(c&&e){const D=Math.max(0,Number(a.target.value))*c.height/c.naturalHeight,j=D/c.height*100,R={...e,y:j};n(R),i({unit:"px",x:e.x/100*c.width,y:D,width:e.width/100*c.width,height:e.height/100*c.height})}},style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"1px solid var(--border)",fontSize:"0.9rem"}})]})]}),s.jsx("div",{style:{background:"repeating-conic-gradient(#f8fafc 0% 25%, transparent 0% 50%) 50% / 20px 20px",border:"1px solid var(--border)",borderRadius:"0.5rem",overflow:"hidden",display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:s.jsx("canvas",{ref:L,style:{maxWidth:"100%",height:"auto",maxHeight:"200px",objectFit:"contain"}})}),s.jsxs("button",{onClick:le,className:"btn-primary",style:{width:"100%",padding:"1rem",borderRadius:"0.75rem",background:"var(--primary)",color:"white",fontWeight:"700",fontSize:"1.1rem",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",boxShadow:"0 4px 6px -1px var(--primary-light)"},children:[s.jsx(De,{size:22})," Download Image"]})]}),s.jsxs("div",{style:{background:"#eff6ff",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #bfdbfe",fontSize:"0.85rem",color:"#1e40af",lineHeight:"1.5"},children:[s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.25rem",fontWeight:"600"},children:[s.jsx(je,{size:16})," Pro Tip"]}),s.jsxs("div",{style:{marginBottom:"0.5rem"},children:["• Hold ",s.jsx("span",{style:{fontWeight:"600",background:"rgba(255,255,255,0.5)",padding:"0 4px",borderRadius:"4px"},children:"Shift"})," in Freeform mode to lock the current aspect ratio while resizing."]}),s.jsx("div",{children:"• Drag the crop area to move it, or drag the corners to resize."})]})]})]}):s.jsx("div",{style:U,children:s.jsxs("div",{style:{border:"2px dashed var(--border)",borderRadius:"1rem",padding:"5rem 2rem",textAlign:"center",cursor:"pointer",transition:"all 0.2s",background:"#fafafa"},onClick:()=>document.getElementById("file-upload").click(),onDragOver:a=>{a.preventDefault(),a.currentTarget.style.borderColor="var(--primary)"},onDragLeave:a=>{a.preventDefault(),a.currentTarget.style.borderColor="var(--border)"},onDrop:a=>{var c;if(a.preventDefault(),a.currentTarget.style.borderColor="var(--border)",(c=a.dataTransfer.files)!=null&&c[0]){const x=new FileReader;x.onload=()=>t(x.result),x.readAsDataURL(a.dataTransfer.files[0])}},children:[s.jsx("input",{id:"file-upload",type:"file",accept:"image/*",onChange:de,style:{display:"none"}}),s.jsx("div",{style:{background:"#e0f2fe",width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem",color:"#0ea5e9"},children:s.jsx(fe,{size:40})}),s.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"0.5rem"},children:"Click or Drag Image Here"}),s.jsx("p",{style:{color:"#64748b"},children:"Supports JPG, PNG, WebP"})]})})]})}),s.jsx("style",{children:`
                @media (max-width: 900px) {
                    .cropper-layout {
                        grid-template-columns: 1fr !important;
                    }
                }
            `})]})};export{Le as default};
